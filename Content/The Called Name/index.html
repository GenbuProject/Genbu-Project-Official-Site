<!DocType HTML>

<HTML>
	<Head>
		<Meta Charset = "UTF-8">
		<Title>Genbu Project Official Site == The Called Name</Title>
		
		<Script Src = "https://genbuproject.github.io/RPG-Helper/Alpha/RPG Helper Alpha 1.3.js"></Script>
		<Link Rel = "StyleSheet" HREF = "https://genbuproject.github.io/RPG-Helper/Alpha/RPG Helper Alpha 1.3.css">
		
		<Script Src = "Script/JsDecoder.js"></Script>
		<Script Src = "Script/JsColorizer.js"></Script>
		<Script Src = "https://code.jquery.com/jquery-1.12.2.js"></Script>
		
		<Script Type = "Text/JavaScript">
			function Formater() {
				var Code = document.getElementById("Code").value;
				
				var Decoder = new JsDecoder();
					Decoder.s = Code;
					Code = Decoder.decode();
					
				var Colorizer = new JsColorizer();
					Colorizer.s = Code;
					Code = Colorizer.colorize();
				
				document.getElementById("FormatedCode").innerHTML = Code;
				
				if (document.getElementById("FormatedCode").innerHTML == "") {
					document.getElementById("FormatedCode").style.display = "None";
				} else {
					document.getElementById("FormatedCode").style.display = "Block";
				}
			}
			
			Date.prototype.getToday = function (SplitWord) {
				var Day = new Date().toLocaleDateString().split("/");
				var Dates = [Day[0], Day[1], Day[2]];
				
				if (Dates[1].length == 1) Dates[1] = "0" + Day[1];
				if (Dates[2].length == 1) Dates[2] = "0" + Day[2];
				
				return Dates[0] + SplitWord + Dates[1] + SplitWord + Dates[2];
			}
		</Script>
		
		<Script Type = "Text/JavaScript">
			function Main() {
				with (new RPGHelper()) {
					var Flag = {
						IsOpening: false
					}
					
					var Panel = {
						SideMenu: null,
						ItemPane: null,
						ExplainPane: null
					}
					
					Sound.Load(function () {
						Sound.PlayBGM(1);
						
						var StartMenu = Menu.MenuPanel(["36", "79"]);
							Menu.MenuItem(StartMenu, ["00", "41"], R.COLOR.WHITE, "NEW GAME", function () {
								Sound.StopBGM();
								
								StartMenu.parentElement.removeChild(StartMenu);
								Effect.BlackOut(1.5, 0, true);
								
								setTimeout(function () {
									Canvas.style.background = "Black";
									Sound.PlayBGM(2);
									
									var PropPane = Menu.MenuPanel(["03", "^7"]);
										Menu.MenuMsgBox(PropPane, ["00", "^1"], R.COLOR.WHITE, "主人公の名前を入力して下さい");
										Menu.MenuTextArea(PropPane, ["01", "^2"], R.COLOR.GREEN, "", true);
										Menu.MenuItem(PropPane, ["02", "^4"], R.COLOR.WHITE, "決定", function () {
											Sound.StopBGM();
											
											PropPane.parentElement.removeChild(PropPane);
											Canvas.style.background = "Black";
											
											Resource.UserData.Character[0] = {
												Name: PropPane.children[1].value,
												Job: "勇者",
												
												CharacterTip: "MainCharacter.png",
												CharacterFace: "MainCharacter.png",
												
												HP: 50,
												MP: 5,
												
												ATK: 5,
												DEF: 5,
												MAG: 5,
												SPD: 5,
												LUK: 5
											};
											
											Effect.BlackOut(2.5, 0, true);
											
											setTimeout(function () {
												Sound.PlayBGM(8);
												
												MsgBox(R.POS.CENTER, R.SPEED.NORMAL, R.COLOR.BLUE, "真っ青な空が広がるある日の朝。\n僕はただ空を眺めていた。", function () {
													MsgBox(R.POS.CENTER, R.SPEED.NORMAL, R.COLOR.BLUE, "僕の名前は" + Resource.UserData.Character[0]["Name"] + "。\nエルム村育ちの普通の子供だ。", function () {
														MsgBox(R.POS.CENTER, R.SPEED.NORMAL, R.COLOR.BLUE, "このエルム村は森に囲まれた場所にあり、\nあまり栄えているとはいえない。\n人口は僕を含めて13人。\nだから他から干渉を受けない場所のはずだった...", function () {
															Map.Show(0);
															Character.Warp(0, R.DIRECTION.S, [16, 12]);
															Effect.ColorOut(2, 0, "Black");
															
															setTimeout(function () {
																Sound.StopBGM();
																Sound.PlaySE(1);
																
																MsgBox(R.POS.BOTTOM, R.SPEED.NORMAL, R.COLOR.WHITE, "？？？\n「た、大変だー！！\n　エレンが居ないぞ！！」", function () {
																	MsgBox(R.POS.BOTTOM, R.SPEED.NORMAL, R.COLOR.WHITE, Resource.UserData.Character[0]["Name"] + "\n『なっ、何だって...!?\n　一体何が起こったんだ.........』", function () {
																		Effect.BlackOut(2, 0, true);
																		
																		setTimeout(function () {
																			Map.Hide();
																			Character.Hide();
																			
																			MsgBox(R.POS.BOTTOM, R.SPEED.SLOW, R.COLOR.BLUE, "誰かの叫び声が聞こえてから暫くすると、\n蔵書庫へ集合する旨の放送が流れた...", function () {
																				Map.Show(0);
																				Character.Warp(0, R.DIRECTION.S, [16, 12]);
																				Effect.ColorOut(1.5, 0, "Black");
																				
																				setTimeout(function () {
																					Sound.PlayBGM(9);
																					
																					MsgBox(R.POS.BOTTOM, R.SPEED.SLOW, R.COLOR.WHITE, "エルム村の緊急放送\n「エルム村の村人達は蔵書庫へ集合せよ\n　繰り返す\n　エルム村の村人達は蔵書庫へ集合せよ」", function () {
																						MsgBox(R.POS.BOTTOM, R.SPEED.NORMAL, R.COLOR.BLUE, "周りの村人達が次々と蔵書庫に集まっている...\n僕も蔵書庫へ向かおう...！", function () {
																							GamePad.KeyboardType(0);
																							
																							document.addEventListener("keydown", function (Event) {
																								switch (Event.keyCode) {
																									case 88:
																										if (!Flag.IsOpening) {
																											Flag.IsOpening = true;
																											
																											Panel.SideMenu = Menu.MenuPanel(["00", "37"]);
																												Menu.MenuItem(Panel.SideMenu, ["00", "31"], R.COLOR.WHITE, "アイテム", function () {
																													Panel.ItemPane = Menu.MenuPanel(["30", "^7"]);
																														Menu.MenuItem(Panel.ItemPane, ["", ""], R.COLOR.WHITE, "←", function () {
																															Panel.ItemPane.parentElement.removeChild(Panel.ItemPane);
																															Panel.ItemPane = null;
																														});
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["01", "32"], R.COLOR.WHITE, "技能", function () {
																													
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["02", "33"], R.COLOR.WHITE, "装備", function () {
																													
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["03", "34"], R.COLOR.WHITE, "ステータス", function () {
																													
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["04", "35"], R.COLOR.WHITE, "イベント", function () {
																													
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["05", "36"], R.COLOR.WHITE, "オプション", function () {
																													
																												});
																												
																												Menu.MenuItem(Panel.SideMenu, ["06", "37"], R.COLOR.WHITE, "セーブ", function () {
																													Save("The Called Name " + new Date().getToday("-") + ".sav");
																												});
																												
																											Panel.ExplainPane = Menu.MenuPanel(["07", "^^"]);
																										} else if (Flag.IsOpening) {
																											Flag.IsOpening = false;
																											
																											Panel.SideMenu.parentElement.removeChild(Panel.SideMenu);
	
																											Panel.ExplainPane.parentElement.removeChild(Panel.ExplainPane);
																											
																											if (Panel.ItemPane != null) {
																												Panel.ItemPane.parentElement.removeChild(Panel.ItemPane);
																											}
																										}
																										
																										Sound.PlaySE("Click");
																										
																										break;
																								}
																							});
																						});
																					});
																				}, 1500);
																			});
																		}, 2000);
																	});
																});
															}, 2000);
														});
													});
												});
											}, 2500);
										});
								}, 1500);
							});
							
							Menu.MenuItem(StartMenu, ["01", "42"], R.COLOR.WHITE, "LOAD GAME", function () {
								Load(".sav", function () {
									var Msg = MsgBox(R.POS.CENTER, R.SPEED.NORMAL, R.COLOR.WHITE, "ゲームを開始します...", function () {});
									
									setTimeout(function () {
										Msg.click();
									}, 2500);
								});
							});
							
							Menu.MenuItem(StartMenu, ["02", "43"], R.COLOR.WHITE, "About", function () {
								StartMenu.style.display = "None";
								
								var AboutPane = Menu.MenuPanel(["03", "^7"]);
									Menu.MenuItem(AboutPane, ["", ""], R.COLOR.WHITE, "←", function () {
										StartMenu.style.display = "Block";
										AboutPane.parentElement.removeChild(AboutPane);
									});
									
									Menu.MenuItem(AboutPane, ["01", "^2"], R.COLOR.WHITE, "製作者：プログラマーGenboo", function () {});
									Menu.MenuItem(AboutPane, ["02", "^3"], R.COLOR.WHITE, "最終更新日：2016年08月16日[火]", function () {});
									Menu.MenuItem(AboutPane, ["03", "^4"], R.COLOR.WHITE, "バージョン：Alpha 1.3", function () {});
							});
					});
				}
			}
		</Script>
	</Head>
	
	<Body Style = 'Color: #EEE; Font: 14px/2 "メイリオ", Meiryo, Osaka; BackGround: URL("https://genbuproject.github.io/Genbu-Project-Official-Site/Too%20Many%20Tags/Back.jpg");' OnLoad = "Main();">
		<Div ID = "RPGHelper-Main" Width = "512" Height = "512"></Div>
		
		<TextArea ID = "Code" Wrap = "Off" Style = "Width: 100%; Height: 250px" OnKeyDown = "Formater();" OnKeyPress = "Formater();" OnKeyUp = "Formater();"></TextArea>
		<Pre ID = "FormatedCode" Style = "Color: MenuText; BackGround: Menu; Border: Thin Solid OrangeRed; Border-Radius: 5px; Line-Height: 1.5; Display: None;"></Pre>
		<Button OnClick = 'eval(document.getElementById("Code").value);'>コード実行</Button>
	</Body>
</HTML>
